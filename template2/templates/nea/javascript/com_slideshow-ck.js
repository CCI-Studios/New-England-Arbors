var CCI=CCI||{};CCI.Slideshow=new Class({Implements:[Options],options:{duration:300,delay:5e3},container:null,tallestSlide:null,slides:[],thumbs:[],current:null,playing:!1,timer:null,initialize:function(a,b){this.setOptions(b);this.container=$(a);this.slides=this.container.getElements(".slide");this.thumbs=this.container.getElements(".thumb");this.current=0;var c=0;this.slides.each(function(a,b){var d=0;a.setStyles({opacity:1,display:"block"});d=a.getSize().y;a.setStyles({opacity:0,display:""});b==this.current?a.setStyle("opacity",1):a.setStyle("opacity",0);if(d>c){this.tallestSlide=a;c=d}}.bind(this));this.thumbs.each(function(a,b){a.addEvent("click",function(){this.moveTo(b)}.bind(this))}.bind(this));this.resizeHeight();window.addEvent("resize",function(){this.resizeHeight()}.bind(this))},resizeHeight:function(){var a=0;if(this.slides[this.current]!=this.tallestSlide){this.tallestSlide.setStyles({opacity:1,display:"block"});a=this.tallestSlide.getSize().y;this.tallestSlide.setStyles({opacity:0,display:""})}else a=this.tallestSlide.getSize().y;this.slides.each(function(b,c){b!=this.tallestSlide&&b.setStyle("height",a)}.bind(this))},play:function(){this.running=!0;this.timer=this.transition.bind(this).delay(this.options.delay)},stop:function(){this.running=!1;clearTimeout(this.timer)},moveTo:function(a){clearTimeout(this.timer);this.transition(a)},transition:function(a){a===undefined&&(a=this.getNextIndex());var b=this.slides[a],c=this.thumbs[a];this.slides.removeClass("active");this.slides[this.current].tween("opacity",0);b.addClass("active");b.tween("opacity",1);this.thumbs.removeClass("active");c.addClass("active");this.current=a;this.running&&(this.timer=this.transition.bind(this).delay(this.options.delay))},getNextIndex:function(){return(this.current+1)%this.slides.length}});