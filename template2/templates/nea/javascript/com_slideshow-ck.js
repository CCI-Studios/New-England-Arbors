var CCI=CCI||{};CCI.Slideshow=new Class({Implements:[Options],options:{duration:300,delay:5e3},container:null,tallestSlide:null,slides:[],thumbs:[],current:null,playing:!1,timer:null,initialize:function(e,t){this.setOptions(t);this.container=$(e);this.slides=this.container.getElements(".slide");this.thumbs=this.container.getElements(".thumb");this.current=0;window.addEvent("load",function(){var e=0;this.slides.each(function(t,n){var r=0;t.setStyles({opacity:1,display:"block"});r=t.getSize().y;t.setStyles({opacity:0,display:""});n==this.current?t.setStyle("opacity",1):t.setStyle("opacity",0);if(r>e){this.tallestSlide=t;e=r}}.bind(this));this.resizeHeight()}.bind(this));this.thumbs.each(function(e,t){e.addEvent("click",function(){this.moveTo(t)}.bind(this))}.bind(this));window.addEvent("resize",function(){this.resizeHeight()}.bind(this))},resizeHeight:function(){var e=0;if(this.slides[this.current]!=this.tallestSlide){this.tallestSlide.setStyles({opacity:1,display:"block"});e=this.tallestSlide.getSize().y;this.tallestSlide.setStyles({opacity:0,display:""})}else e=this.tallestSlide.getSize().y;this.slides.each(function(t,n){t!=this.tallestSlide&&t.setStyle("height",e)}.bind(this))},play:function(){this.running=!0;this.timer=this.transition.bind(this).delay(this.options.delay)},stop:function(){this.running=!1;clearTimeout(this.timer)},moveTo:function(e){clearTimeout(this.timer);this.transition(e)},transition:function(e){e===undefined&&(e=this.getNextIndex());var t=this.slides[e],n=this.thumbs[e];this.slides.removeClass("active");this.slides[this.current].tween("opacity",0);t.addClass("active");t.tween("opacity",1);this.thumbs.removeClass("active");n.addClass("active");this.current=e;this.running&&(this.timer=this.transition.bind(this).delay(this.options.delay))},getNextIndex:function(){return(this.current+1)%this.slides.length}});